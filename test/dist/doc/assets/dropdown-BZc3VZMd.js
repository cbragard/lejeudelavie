import c from"./input-CUbhKO2p.js";import b from"./list-D1vLadOc.js";import{a as f}from"./animable-S5zFcxd4.js";import{c as g}from"./composable-CshUTKfl.js";import{_ as y,a as w,j as s,d as v,n as u,p as V,h as k,q as C,w as n,m as I,f as B,r as p,o as m,b as L}from"./index-DOX8ZtlD.js";import{t as S}from"./translatable-CDagqyqv.js";const $={"component.dropdown.placeholder":"Select a value ..."},F={},N={en:$,fr:F},A={disableFiltering:{type:Boolean,default:!1},items:{type:Array,required:!0},itemLabel:{type:String,default:"label"},itemValue:{type:String,default:"value"},modelValue:{default:void 0,types:[Boolean,Number,Object,String,null]},placeholder:{types:[Boolean,Number,String]},value:{default:void 0,types:[Boolean,Object,Number,String,null]}},T={name:"VuiDropdown",components:{VuiInput:c,VuiList:b},mixins:[f,g],props:A,emits:["input","update:model-value"],data(){return{keyword:null,selected:null}},computed:{listTitle(){return this.selected?this.placeholderLabel:null},placeholderValue(){const{itemValue:e,selected:l}=this,a=typeof(l==null?void 0:l[e])<"u"?l[e]:l;return a===null?this.placeholderLabel:this.labelFromItem(a)},placeholderLabel(){return this.placeholder?this.placeholder:this.$t("component.dropdown.placeholder")}},watch:{modelValue(e){this.selected=e},value(e){this.selected=e}},created(){S(N),this.hasModelValue?this.selected=this.modelValue:this.hasValue&&(this.selected=this.value)},methods:{labelFromChild(e,l,a){const{itemValue:i,itemLabel:t}=this;return e[i].reduce((o,r)=>r[i]===a?r[t]:o,l)},labelFromItem(e){const{itemValue:l,itemLabel:a}=this;return this.items.reduce((i,t)=>Array.isArray(t[l])?this.labelFromChild(t,i,e):t[l]===e?t[a]:i,e)},onClick(){this.disabled||this.onAnimate()},onInput(e){this.$emit("input",e),this.onAnimate(!0),this.keyword=e.target.value?e.target.value:null},onToggle(e){this.selected=e,this.keyword=null,this.blur(),this.$emit("update:model-value",e)}}},j=["id"];function U(e,l,a,i,t,o){const r=p("vui-input"),h=p("vui-list");return m(),w("div",{id:e.componentId,class:u(["vui-dropdown",e.$props.class])},[s(e.$slots,"prepend"),v("div",{class:u(["vui-dropdown-placeholder",{"vui-dropdown-placeholder--toggled":e.toggled},{"vui-dropdown-placeholder--animating":e.animating},{"vui-dropdown-placeholder--disabled":e.disabled}]),onClick:l[0]||(l[0]=V((...d)=>o.onClick&&o.onClick(...d),["stop"]))},[s(e.$slots,"keyword",{keyword:t.keyword},()=>[L(r,{value:t.keyword,type:"text",class:"vui-dropdown-placeholder-label",placeholder:o.placeholderValue,onInput:o.onInput},null,8,["value","placeholder","onInput"])])],2),e.toggled?(m(),k(h,I({key:0,modelValue:t.selected,"onUpdate:modelValue":l[1]||(l[1]=d=>t.selected=d)},e.$attrs,{class:"vui-dropdown-list","group-id":e.componentGroupId,"disable-filtering":e.disableFiltering,disabled:e.disabled,items:e.items,"item-label":e.itemLabel,"item-value":e.itemValue,keyword:t.keyword,selectable:!0,title:o.listTitle,"onUpdate:modelValue":o.onToggle}),C({_:2},[e.$slots.placeholder?{name:"placeholder",fn:n(()=>[s(e.$slots,"placeholder")]),key:"0"}:void 0,e.$slots["group-item"]?{name:"group-item",fn:n(()=>[s(e.$slots,"group-item")]),key:"1"}:void 0,e.$slots.item?{name:"item",fn:n(()=>[s(e.$slots,"item")]),key:"2"}:void 0]),1040,["modelValue","group-id","disable-filtering","disabled","items","item-label","item-value","keyword","title","onUpdate:modelValue"])):B("",!0),s(e.$slots,"append")],10,j)}const G=y(T,[["render",U]]);export{G as default};
