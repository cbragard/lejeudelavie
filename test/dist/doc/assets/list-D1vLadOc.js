import{a as w}from"./animable-S5zFcxd4.js";import{c as L}from"./composable-CshUTKfl.js";import{_ as S,a as n,j as c,f as m,d as v,F as y,g as V,n as h,o,e as f,t as b,p as I}from"./index-DOX8ZtlD.js";import{t as j}from"./translatable-CDagqyqv.js";function p(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function g(e){return function t(s){return arguments.length===0||p(s)?t:e.apply(this,arguments)}}function C(e){return function t(s,a){switch(arguments.length){case 0:return t;case 1:return p(s)?t:g(function(r){return e(s,r)});default:return p(s)&&p(a)?t:p(s)?g(function(r){return e(r,a)}):p(a)?g(function(r){return e(s,r)}):e(s,a)}}}var B=C(function(t,s){for(var a={},r={},i=0,l=t.length;i<l;)r[t[i]]=1,i+=1;for(var u in s)r.hasOwnProperty(u)||(a[u]=s[u]);return a});const G={},A={},K={en:G,fr:A},N={autoclose:{type:Boolean,default:!0},disableFiltering:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},keyword:{type:String},items:{type:Array,required:!0},itemLabel:{type:String,default:"label"},itemValue:{type:String,default:"value"},modelValue:{default:void 0,types:[Boolean,Number,Object,String]},selectable:{type:Boolean},title:{type:String},value:{default:void 0,types:[Boolean,Number,Object,String]}},O={name:"VuiList",mixins:[w,L],props:N,emits:["update:model-value"],data(){return{last:null,open:{},selected:null}},computed:{hasKeyword(){var e;return!this.disableFiltering&&((e=this.keyword)==null?void 0:e.length)},list(){return this.items.reduce((e,t)=>(this.isGroup(t)?e.push({...t,$$id:this.newId(),value:t[this.itemValue].reduce((s,a)=>!this.hasKeyword||this.match(a)?[...s,this.mapItem(a,this.newId())]:s,[])}):(!this.hasKeyword||this.match(t))&&e.push(this.mapItem(t,this.newId())),e),[])}},watch:{items(){this.autoexpand()},modelValue(e){this.selected=this.mapItem(e)},value(e){this.selected=this.mapItem(e)}},created(){j(K),this.hasModelValue?this.selected=this.mapItem(this.modelValue):this.hasValue&&(this.selected=this.mapItem(this.value)),this.autoexpand()},methods:{autoexpand(){this.open=this.items.reduce((e,t,s)=>{if(this.isGroup(t)){const r=t[this.itemValue].findIndex(i=>this.isSelected(i));if(this.expanded||r>-1)return{...e,[s]:!0}}return e},{})},isAnimating(e){const{animating:t,last:s}=this;return s===e&&t},isGroup(e){return Array.isArray(e==null?void 0:e[this.itemValue])},isObject(e){const t=this.itemValue;return this.isGroup(e)?typeof e[t][0]=="object":typeof e=="object"},isSelected(e){return!e.disabled&&typeof this.selected<"u"?typeof e=="object"?this.selected&&this.selected[this.itemValue]===e[this.itemValue]:this.selected&&this.selected===e:!1},isToggled(e){const{last:t,open:s,toggled:a}=this;return t===e&&s[e]&&a},match(e){return typeof e=="object"?`${e[this.itemLabel]}`.includes(this.keyword):`${e}`.includes(this.keyword)},mapItem(e,t){const s=typeof e=="object"?e:{[this.itemLabel]:e,[this.itemValue]:e};return t?{...s,$$id:t}:s},onClick(e){if(!this.disabled&&this.selectable){const t=B(["$$id"],e),s=this.isObject(t)&&this.hasAttribute("return-object")?t:t[this.itemValue];this.selected=this.isSelected(t)?null:t,t.route&&this.$router.push(t.route),this.$emit("update:model-value",s)}},onToggle(e){this.disabled||(this.last=e,this.autoclose?this.open={[e]:!this.open[e]}:this.open[e]=!this.open[e],this.onAnimate(this.open[e]))}}},T=["id"],F={key:0,class:"vui-list-title"},$={class:"vui-list-items"},M=["onClick"],P=["onClick"],q=["onClick"];function z(e,t,s,a,r,i){return o(),n("div",{id:e.componentId,class:h(["vui-list",{"vui-list--flat":e.hasAttribute("flat")},e.$props.class])},[c(e.$slots,"prepend"),e.title?(o(),n("div",F,[c(e.$slots,"placeholder",{item:e.title},()=>[f(b(e.title),1)])])):m("",!0),v("div",$,[(o(!0),n(y,null,V(i.list,(l,u)=>(o(),n("div",{key:l.$$id,class:h([{"vui-list-items-item":!i.isGroup(l)},{"vui-list-items-group-item":i.isGroup(l)}])},[i.isGroup(l)?m("",!0):(o(),n("div",{key:0,class:h([{"vui-list-items-item-label":!i.isGroup(l)},{"vui-list-items-item-label--selectable":e.selectable},{"vui-list-items-item-label--selected":i.isSelected(l)}]),onClick:()=>i.onClick(l)},[l.icon?(o(),n("i",{key:0,class:h(["vui-list-items-item-label-icon",l.icon])},null,2)):m("",!0),c(e.$slots,"item",{index:u,item:l,itemLabel:e.itemLabel,itemValue:e.itemValue},()=>[f(b(l[e.itemLabel]),1)])],10,M)),i.isGroup(l)?(o(),n(y,{key:1},[v("div",{class:h(["vui-list-items-item-group-label",{"vui-list-items-item-group-label--toggled":i.isToggled(u)},{"vui-list-items-item-group-label--animating":i.isAnimating(u)},{"vui-list-items-item-group-label--open":r.open[u]||i.hasKeyword}]),onClick:I(()=>i.onToggle(u),["stop"])},[c(e.$slots,"group-item",{index:u,item:l,itemLabel:e.itemLabel,itemValue:e.itemValue},()=>[f(b(l[e.itemLabel]),1)])],10,P),r.open[u]||i.hasKeyword?(o(!0),n(y,{key:0},V(l[e.itemValue],(d,k)=>(o(),n("div",{key:d.$$id,class:h(["vui-list-items-item-label",{"vui-list-items-item-label--selectable":e.selectable},{"vui-list-items-item-label--selected":i.isSelected(d)}]),onClick:()=>i.onClick(d)},[d.icon?(o(),n("i",{key:0,class:h(["vui-list-items-item-label-icon",d.icon])},null,2)):m("",!0),c(e.$slots,"item",{index:k,item:d,itemLabel:e.itemLabel,itemValue:e.itemValue},()=>[f(b(d[e.itemLabel]),1)])],10,q))),128)):m("",!0)],64)):m("",!0)],2))),128))]),c(e.$slots,"append")],10,T)}const Q=S(O,[["render",z]]);export{Q as default};
